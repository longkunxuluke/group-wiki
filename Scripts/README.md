# Automating workflows

## [QCP](https://github.com/tommason14/qcp) - Quantum Chemical Processor
Automate processes such as 
- creating input and job files
- recursive parsing of log files
- recursive submission of jobs, deletion of queued jobs
- Finding bond distances of xyz files

Currently installed on Raijin, Magnus, Monarch, Massive and Stampede. Implemented for GAMESS, PSI4 and Gaussian calculations

## [LAMMPS input file generation](PHMD)

Scripts to generate a LAMMPS input file, along with a data file containing the
appropriate force field parameters, given an xyz file with numbered atoms. Uses
a python script to fill a blank data file generated by vmd, with a dictionary
populated with the required force field parameters. See the readme in the
folder for more details.

# Visualising results

## [view_hessian_calculation.ipynb](view_hessian_calculation.ipynb) 

Takes a GAMESS log file as an input and produces an infrared spectra along with
a molecule viewer to view all the vibrational modes of files generated using
the FMO approach.

## [gamess_to_molden.py](gamess_to_molden.py)

Parse GAMESS log files for use with
[molden](http://cheminf.cmbi.ru.nl/molden/), allowing for easy viewing of
geometries, convergence, frequencies and vibrational modes generated using the
FMO approach (also works with non-FMO).

Useful when generating IR spectra as molden automatically fits Lorentzian
curves to the intensities found from the Hessian.

Run as `gamess_to_molden.py input.log`

# System admin

## [folder_sizes.py](folder_sizes.py)

Use this script to obtain the sizes of each folder in
the current directory.  Useful for logging scratch space usage. (May throw
errors if directory names contain spaces)

## Clear Massive scratch space
 
Use [clean_scratch.sh](clean_scratch.sh) to remove all files that are not
required for currently running jobs. 

NB: Do NOT use this script if you run jobs from the scratch folder and have no
local backups. This script will delete all of your work! 

To remove temporary files in the group scratch folder, run the following command:

`cd /scratch/sn29; ls -l | grep $USER | awk '{print $NF}' | grep ^[0-9] | xargs rm -r; cd -`

This will remove folders written by SLURM i.e. folders named with the SLURM job
id. 

## Incompatibilities between software and calculation output

Gaussview 5 cannot read a Gaussian 16 frequency output. A fix is described
[here](GV5_frequency_fix.md).
